---
layout: post
title: Continuous Integration Builds using Jenkins for Xamarin.iOS
date: '2013-09-25T22:13:00.000-04:00'
author: Carlo
tags:
- Xamarin.iOS
- TEE
- TFS
- Team Explorer Everywhere
- Build Server
- Jenkins
- OS X
- Xamarin
- Xamarin Studio
- iOS
- monotouch
- Continuous Integration
modified_time: '2013-09-25T22:15:17.706-04:00'
thumbnail: http://4.bp.blogspot.com/-LjN5oxP_zmg/Ujch0cCDOWI/AAAAAAACTL8/ulD9dquaJkw/s72-c/Screen+Shot+2013-09-16+at+11.20.29+AM.png
blogger_id: tag:blogger.com,1999:blog-1115978604548657664.post-3379303535927665586
blogger_orig_url: https://thewahlstedts.blogspot.com/2013/09/continuous-integration-builds-using.html
---

The first thing you'll need is a spare OS X machine. There happened to be a Mac Mini laying around to use.<br /><ol><li>The first thing I did was to install <a href="http://jenkins-ci.org/" target="_blank">Jenkins</a>.&nbsp;</li><li>Once installed I created a folder to do all of the builds in. Note that Jenkins creates a user. I created the folder here: /Users/Shared/Build/.&nbsp;</li><li>Make sure that you give read and write permissions to the jenkins user that was created.</li><li>Now download <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30661" target="_blank">Team Explorer Everywhere (TEE)</a></li><li>Copy TEE it to the newly created folder (/Users/Shared/Build/)</li><li>Run the following commands in the command line to accept the eula of tf and allow the build to work:</li><ul><li>sudo su jenkins</li><li><span style="white-space: pre;">[Enter Current User Password]</span></li><li>./tf eula</li></ul><li>On the Jenkins build server, via the web browser, go to Manage Jenkins &gt; Manage Plugins<a href="http://4.bp.blogspot.com/-LjN5oxP_zmg/Ujch0cCDOWI/AAAAAAACTL8/ulD9dquaJkw/s1600/Screen+Shot+2013-09-16+at+11.20.29+AM.png" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-right: 1em; text-align: center;"><img border="0" height="202" src="http://4.bp.blogspot.com/-LjN5oxP_zmg/Ujch0cCDOWI/AAAAAAACTL8/ulD9dquaJkw/s640/Screen+Shot+2013-09-16+at+11.20.29+AM.png" width="640" /></a></li><li>Install the Team Foundation Server Plugin (I also upgraded the other plugins while I was there).<a href="http://1.bp.blogspot.com/-fa03zIfBZsU/Ujch_s2r_OI/AAAAAAACTME/5aXZSo6vJuo/s1600/Screen+Shot+2013-09-16+at+11.21.14+AM.png" imageanchor="1" style="clear: left; display: inline !important; margin-bottom: 1em; margin-right: 1em; text-align: center;"><img border="0" height="38" src="http://1.bp.blogspot.com/-fa03zIfBZsU/Ujch_s2r_OI/AAAAAAACTME/5aXZSo6vJuo/s640/Screen+Shot+2013-09-16+at+11.21.14+AM.png" width="640" /></a></li><li>Next go to Manage Jenkins &gt; Configure System</li><li>Go to Team Foundation Server &gt; TF command line executable and put the path in to tf.<a href="http://2.bp.blogspot.com/-yT00szVSXp4/UjciTxXCCGI/AAAAAAACTMM/u9oyBdhKIxg/s1600/Screen+Shot+2013-09-16+at+11.22.40+AM.png" imageanchor="1" style="clear: left; display: inline !important; margin-bottom: 1em; margin-right: 1em; text-align: center;"><img border="0" height="84" src="http://2.bp.blogspot.com/-yT00szVSXp4/UjciTxXCCGI/AAAAAAACTMM/u9oyBdhKIxg/s640/Screen+Shot+2013-09-16+at+11.22.40+AM.png" width="640" /></a></li><li>Back on the machine, Install Xcode and Command Line Tools (Xcode &gt; Preferences)<a href="http://3.bp.blogspot.com/-nsarvw_6g2Q/UjchbXbPi5I/AAAAAAACTL0/nX6c_PB1uYk/s1600/Screen+Shot+2013-09-16+at+11.17.15+AM.png" imageanchor="1" style="clear: left; display: inline !important; margin-bottom: 1em; margin-right: 1em; text-align: center;"><img border="0" height="162" src="http://3.bp.blogspot.com/-nsarvw_6g2Q/UjchbXbPi5I/AAAAAAACTL0/nX6c_PB1uYk/s640/Screen+Shot+2013-09-16+at+11.17.15+AM.png" width="640" /></a></li><li>Install Xamarin Studio</li><li>Activate Xamarin Studio on the Jenkins account</li><ul><li>To do this you will need to:</li><ol><li>Go to System Preferences &gt; Users &amp; Groups &gt; Select the standard user without a name</li><li>(Optional) Give this user a name, I used Jenkins</li><li>Change the password of this user</li><li>Switch to the Jenkins user</li><li>Open any solution in xamarin studio</li><li>Select Project &gt; Profile - Mono (this will cause Xamarin Studio to activate)</li></ol></ul></ol><h3></h3><h3>Setup a build</h3><ol><li>In the Jenkins web interface select New Job.</li><li>Give the job a name</li><li>Select the Build multi-configuration project and click OK</li><li>Scroll down to the Source Code Management section and select Team Foundation Server.<a href="http://3.bp.blogspot.com/-jUV4zGObMcw/Ujc30o9oJWI/AAAAAAACTMc/x5PZNRfyVak/s1600/Screen+Shot+2013-09-16+at+12.50.57+PM.png" imageanchor="1" style="clear: left; display: inline !important; margin-bottom: 1em; margin-right: 1em; text-align: center;"><img border="0" height="328" src="http://3.bp.blogspot.com/-jUV4zGObMcw/Ujc30o9oJWI/AAAAAAACTMc/x5PZNRfyVak/s640/Screen+Shot+2013-09-16+at+12.50.57+PM.png" width="640" /></a></li><li>Setup a Build Trigger for Poll SCM which will only build on check-in. You can use to help to see the format but an example that checks every 10 minutes is: H/10 * * * *</li><li>In the Build section, Add a build step to Execute shell.</li><li>Give in the following command: bash -ex /Users/Shared/Build/Scripts/BuildScript.sh where this is the path to the script and the name of it. There are some scripts in source.</li><li>Save the build</li></ol><h3></h3><div><br /></div><h3>Test the build</h3><ol><li>Go to the main page and click the clock with the arrow in the right hand side of the grid out from where the build is.</li><li>You should shortly see the build appear in the left hand side of the page under the menu. Once it appears click on it.</li><li>Click on the Console Output menu item to watch what the build is doing.</li><li>It should make it to the "Triggering" step. In this instance our trigger will be "default". Click on that link.</li><li>Under Build History, in the left hand side click the currently running build, which is also the top build.</li><li>Click on Console output again to see what this step is doing.</li><li>The last line that is output should show SUCCESS.</li></ol><h3><b><br /></b></h3><h3><b>What to Do if the Build is Failing</b></h3><ol><li>Check the Console Output for the error messages. There were various issues and fixes I ran across trying to get this setup.</li><li>If you're having a source control mapping issue, you might need to remove the workspace mentioned in the error via command line.</li><ul><li>To do this you will need to use tf.</li><li>Navigate to the location of it or simply type in the path. Here's a sample of the command to run: ./tf workspaces -remove:WORKSPACE_NAME</li></ul><li>If you're having other, maybe seemingly random issues, verify that the Jenkins user has access to the folders it's trying to use.</li></ol><a href="http://4.bp.blogspot.com/-G2FZyQMC9Vk/Ujc4v9KUlhI/AAAAAAACTMk/YiztNdhJPk4/s1600/Screen+Shot+2013-09-16+at+12.55.50+PM.png" imageanchor="1" style="clear: left; display: inline !important; margin-bottom: 1em; margin-right: 1em; text-align: center;"><img border="0" src="http://4.bp.blogspot.com/-G2FZyQMC9Vk/Ujc4v9KUlhI/AAAAAAACTMk/YiztNdhJPk4/s1600/Screen+Shot+2013-09-16+at+12.55.50+PM.png" /></a><br /><ol></ol><h3></h3><h3>Notes</h3>This is a very simple and straightforward approach to building an application. There is a lot more you can do that I have not mentioned here. This is a basic tutorial to get you started using the build server. I strongly recommend setting up CI as it will help in many ways.<br /><br /><br />Instructions are loosely based off on an&nbsp;<a href="http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/19/building-ios-apps-in-tfs.aspx" target="_blank">MSDN article</a>.<br /><div><br /></div>